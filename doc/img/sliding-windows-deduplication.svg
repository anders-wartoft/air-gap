<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="380" viewBox="0 0 800 380" xmlns="http://www.w3.org/2000/svg">
  <g font-family="sans-serif" font-size="14">
    <!-- Timeline -->
    <line x1="80" y1="60" x2="720" y2="60" stroke="#333" stroke-width="2"/>
    <text x="80" y="50" fill="#333">Offsets</text>
    <text x="90" y="80" fill="#333">5000</text>
    <text x="230" y="80" fill="#333">6000</text>
    <text x="370" y="80" fill="#333">7000</text>
    <text x="510" y="80" fill="#333">8000</text>
    <text x="650" y="80" fill="#333">9000</text>

    <!-- Windows -->
    <rect x="80" y="100" width="140" height="60" fill="#e0f7fa" stroke="#0097a7" stroke-width="2"/>
    <rect x="220" y="100" width="140" height="60" fill="#e0f7fa" stroke="#0097a7" stroke-width="2"/>
    <rect x="360" y="100" width="140" height="60" fill="#e0f7fa" stroke="#0097a7" stroke-width="2"/>
    <rect x="500" y="100" width="140" height="60" fill="#f5f5f5" stroke="#bdbdbd" stroke-width="2" opacity="0.5"/>
    <text x="100" y="125" fill="#333">Window 1</text>
    <text x="240" y="125" fill="#333">Window 2</text>
    <text x="380" y="125" fill="#333">Window 3</text>
    <text x="520" y="125" fill="#888">Window 4</text>
    <text x="100" y="155" fill="#333">5000–5999</text>
    <text x="240" y="155" fill="#333">6000–6999</text>
    <text x="380" y="155" fill="#333">7000–7999</text>
    <text x="520" y="155" fill="#888">8000–8999</text>

    <!-- Received events (green dots) and gaps (empty) -->
    <circle cx="110" cy="180" r="7" fill="#43a047"/>
    <circle cx="130" cy="180" r="7" fill="#43a047"/>
    <circle cx="150" cy="180" r="7" fill="#fff" stroke="#b71c1c" stroke-width="2"/>
    <circle cx="170" cy="180" r="7" fill="#43a047"/>
    <circle cx="250" cy="180" r="7" fill="#43a047"/>
    <circle cx="270" cy="180" r="7" fill="#fff" stroke="#b71c1c" stroke-width="2"/>
    <circle cx="290" cy="180" r="7" fill="#43a047"/>
    <circle cx="310" cy="180" r="7" fill="#43a047"/>
    <circle cx="390" cy="180" r="7" fill="#43a047"/>
    <circle cx="410" cy="180" r="7" fill="#43a047"/>
    <circle cx="430" cy="180" r="7" fill="#fff" stroke="#b71c1c" stroke-width="2"/>
    <circle cx="450" cy="180" r="7" fill="#43a047"/>

    <!-- Sliding action arrow -->
    <line x1="220" y1="170" x2="500" y2="170" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="300" y="165" fill="#1976d2">New event (offset 8000) triggers new window</text>

    <!-- Purge action -->
    <line x1="150" y1="160" x2="60" y2="220" stroke="#b71c1c" stroke-width="2" marker-end="url(#arrowhead)"/>
    <rect x="20" y="220" width="80" height="30" fill="#fffde7" stroke="#fbc02d" stroke-width="2"/>
    <text x="25" y="240" fill="#b71c1c">Gaps Topic</text>
    <text x="60" y="215" fill="#b71c1c" font-size="12">Purge</text>

    <!-- Trash icon for purged window -->
    <g transform="translate(40, 120)">
      <rect x="0" y="0" width="20" height="24" rx="3" fill="#bdbdbd" stroke="#888" stroke-width="1.5"/>
      <rect x="5" y="5" width="10" height="13" fill="#fff" stroke="#888" stroke-width="1"/>
      <rect x="7" y="8" width="2" height="8" fill="#bdbdbd"/>
      <rect x="11" y="8" width="2" height="8" fill="#bdbdbd"/>
      <rect x="4" y="-5" width="12" height="5" rx="2" fill="#888"/>
    </g>

    <!-- Legend -->
    <rect x="600" y="250" width="180" height="90" fill="#fafafa" stroke="#bdbdbd"/>
    <circle cx="620" cy="270" r="7" fill="#43a047"/>
    <text x="635" y="275" fill="#333">Received event</text>
    <circle cx="620" cy="295" r="7" fill="#fff" stroke="#b71c1c" stroke-width="2"/>
    <text x="635" y="300" fill="#333">Gap (missing event)</text>
    <rect x="610" y="315" width="20" height="10" fill="#e0f7fa" stroke="#0097a7"/>
    <text x="635" y="325" fill="#333">Window</text>
    <rect x="610" y="335" width="20" height="10" fill="#f5f5f5" stroke="#bdbdbd" opacity="0.5"/>
    <text x="635" y="345" fill="#888">Purged window</text>
    <g transform="translate(610, 355)">
      <rect x="0" y="0" width="20" height="12" rx="2" fill="#bdbdbd" stroke="#888" stroke-width="1"/>
      <rect x="5" y="3" width="10" height="6" fill="#fff" stroke="#888" stroke-width="0.5"/>
      <rect x="7" y="4" width="2" height="4" fill="#bdbdbd"/>
      <rect x="11" y="4" width="2" height="4" fill="#bdbdbd"/>
      <rect x="4" y="-3" width="12" height="3" rx="1.5" fill="#888"/>
    </g>
    <text x="635" y="365" fill="#888">Trash = purged</text>

    <!-- Arrowhead marker definition -->
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#1976d2"/>
      </marker>
    </defs>
  </g>
</svg>
